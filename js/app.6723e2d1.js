(function(){"use strict";var e={821:function(e,t,n){var s=n(9242),o=n(3396);const r={id:"app"};function a(e,t,n,s,a,i){const c=(0,o.up)("vue-advanced-chat");return(0,o.wg)(),(0,o.iD)("div",r,[(0,o.Wm)(c,{height:"calc(100vh - 20px)","current-user-id":a.clientID,rooms:JSON.stringify(a.rooms),messages:JSON.stringify(a.messages),"messages-loaded":a.messagesLoaded,onSendMessage:t[0]||(t[0]=e=>i.sendMessage(e.detail[0])),"show-add-room":"true","show-files":"true","rooms-loaded":!0},null,8,["current-user-id","rooms","messages","messages-loaded"])])}var i=n(4161),c=n(2698),d=n(8396),l=n(6811),u=n(1232);const g=(e,t)=>{const n=(new c.s).withUrl(`${e}/hub`,{skipNegotiation:!0,transport:d.n.WebSockets}).configureLogging(l.i.Debug).withAutomaticReconnect().build();return n.onclose((async e=>{console.assert(n.state===u.A.Disconnected),t.reconnecting=!0,t.connected=!1,console.log("disconnected:"+e),await t.start()})),n.on("Connected",(({clientID:e})=>{t.clientID=e})),n.on("Progress",(e=>{var n={_id:t.messages.length,content:e,senderId:0,timestamp:(new Date).toString().substring(16,21),date:(new Date).toDateString()};t.messages[t.messages.length-1]=n})),n.on("Complete",(e=>{var n={_id:t.messages.length,content:e,senderId:0,timestamp:(new Date).toString().substring(16,21),date:(new Date).toDateString()};t.messages[t.messages.length-1]=n,t.messagesLoaded=!0})),n.on("Error",(e=>{t.errors=[JSON.parse(e)]})),n.on("Reply",((e,n)=>{t.messages=[...t.messages,{_id:n,content:e,senderId:t.clientID,timestamp:(new Date).toString().substring(16,21),date:(new Date).toDateString()}]})),n};var m=n(1233);(0,m.z)();var f={name:"App",data(){return{selectedFile:null,progress:null,clientID:null,error:null,connected:!1,reconnecting:!1,rooms:[],messages:[],messagesLoaded:!0,errors:[]}},created(){this.hub=g({NODE_ENV:"production",BASE_URL:"sk-demo/"}.VUE_APP_BASE_URL,this)},methods:{async start(){try{await this.hub.start(),console.log("SignalR Connected."),this.connected=!0}catch(e){console.log(e),setTimeout(this.start,5e3)}this.reconnecting=!1},async uploadPdf(e,t){if(0==e.length)return alert("Please select a PDF file."),!1;this.messagesLoaded=!1;const n=new FormData;n.append("message",t);for(let o in e){let t=e[o];"pdf"!=t.extension&&alert("Please select a PDF file."),n.append("file",new File([t.blob],`${t.name}.${t.extension}`))}try{await i.Z.post(`${{NODE_ENV:"production",BASE_URL:"sk-demo/"}.VUE_APP_BASE_URL}/api/fileupload/${this.clientID}`,n,{headers:{"Content-Type":"multipart/form-data"}})}catch(s){console.error("Error uploading file:",s)}},async sendMessage(e){if(e.files&&e.files.length>0)await this.uploadPdf(e.files,e.content);else{let t=this.messages.length;await this.hub.invoke("Ask",e.content,t),this.messages=[...this.messages,{_id:t,content:e.content,senderId:1,timestamp:(new Date).toString().substring(16,21),date:(new Date).toDateString()}]}}},mounted(){this.start(),this.rooms=[...this.rooms,{roomId:"1",roomName:"Semantic-Kernel demo: PDF Chat",avatar:"https://www.techopedia.com/wp-content/uploads/2023/03/6e13a6b3-28b6-454a-bef3-92d3d5529007.jpeg",unreadCount:0,index:1,users:[{_id:"1",username:"Demo User",avatar:"https://media.licdn.com/dms/image/C5603AQFZ5CsDDBN8Qg/profile-displayphoto-shrink_100_100/0/1516584677087?e=1689206400&v=beta&t=VKwPOI-mdi7C6ESVuGdt6uBdSNlX5S3moO204j4x6G8",status:{state:"online"}}]}],this.messages=[{_id:this.messages.length,content:"Welcome! Please upload PDFs files to start the conversation.",senderId:0,timestamp:(new Date).toString().substring(16,21),date:(new Date).toDateString()}]}},h=n(89);const p=(0,h.Z)(f,[["render",a]]);var w=p;(0,s.ri)(w).mount("#app")}},t={};function n(s){var o=t[s];if(void 0!==o)return o.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,s,o,r){if(!s){var a=1/0;for(l=0;l<e.length;l++){s=e[l][0],o=e[l][1],r=e[l][2];for(var i=!0,c=0;c<s.length;c++)(!1&r||a>=r)&&Object.keys(n.O).every((function(e){return n.O[e](s[c])}))?s.splice(c--,1):(i=!1,r<a&&(a=r));if(i){e.splice(l--,1);var d=o();void 0!==d&&(t=d)}}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[s,o,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,r,a=s[0],i=s[1],c=s[2],d=0;if(a.some((function(t){return 0!==e[t]}))){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(c)var l=c(n)}for(t&&t(s);d<a.length;d++)r=a[d],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(l)},s=self["webpackChunkpdf_chat"]=self["webpackChunkpdf_chat"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(821)}));s=n.O(s)})();
//# sourceMappingURL=app.6723e2d1.js.map